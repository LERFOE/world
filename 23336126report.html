<!DOCTYPE html>
<html>
<head>
<title>23336126report.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E6%9C%9F%E6%9C%AB%E5%A4%A7%E4%BD%9C%E4%B8%9A%E9%80%89%E9%A2%98%E6%8A%A5%E5%91%8A">计算机图形学期末大作业选题报告</h1>
<table>
<thead>
<tr>
<th style="text-align:left">项目名称</th>
<th style="text-align:left">基于 OpenGL 的体素化三维游戏 -- MyCraft</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>小组成员姓名</strong></td>
<td style="text-align:left">梁恩睿</td>
</tr>
<tr>
<td style="text-align:left"><strong>学号</strong></td>
<td style="text-align:left">23336126</td>
</tr>
<tr>
<td style="text-align:left"><strong>专业</strong></td>
<td style="text-align:left">计算机科学与技术</td>
</tr>
<tr>
<td style="text-align:left"><strong>日期</strong></td>
<td style="text-align:left">2025 年 11 月 24 日</td>
</tr>
</tbody>
</table>
<h2 id="%E4%B8%80%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF%E4%B8%8E%E9%80%89%E9%A2%98%E6%84%8F%E4%B9%89">一、项目背景与选题意义</h2>
<p>受沙盒游戏《Minecraft》的启发，体素作为一种离散化的三维数据表达方式，能够直观地构建可交互的虚拟世界。本项目旨在利用本学期所学的计算机图形学基础理论，不依赖成熟的游戏引擎，而是基于 OpenGL 底层图形库，采用 基于 CMake 的现代 C++ 构建流程与依赖管理，从零构建一个类 Minecraft 体素游戏。</p>
<p>本项目的核心目标是通过实现一个具备方块放置与移除、水面动态波动、过程式地形生成以及基础全局光照效果的体素世界。这将把课程中抽象的渲染管线、坐标变换、光照模型等知识点进行实践与验证。</p>
<h2 id="%E4%BA%8C%E7%BB%93%E5%90%88%E8%AF%BE%E7%A8%8B%E5%86%85%E5%AE%B9%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A7%84%E5%88%92">二、结合课程内容的知识点规划</h2>
<p>本项目将紧密围绕本学期《计算机图形学》课程的教学大纲进行设计，计划将各个阶段的学习内容应用到系统的不同模块中：</p>
<h3 id="1-%E5%9F%BA%E7%A1%80%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF%E4%B8%8E%E5%9B%BE%E5%85%83%E7%BB%98%E5%88%B6%E5%AF%B9%E5%BA%94%E8%AF%BE%E7%A8%8B%E7%AC%AC-2-6-%E5%91%A8">1. 基础渲染管线与图元绘制（对应课程第 2-6 周）</h3>
<p>项目将放弃古老的固定管线，完全采用 Core Profile模式进行开发。在项目初期，我计划通过手动管理顶点数组对象（VAO）和顶点缓冲对象（VBO），实现最基础的立方体绘制。这将直接应用到课程中关于光栅化原理和 OpenGL 状态机的知识，编写综合性的 GLSL 着色器来控制顶点的输出颜色与材质混合，验证渲染管线的基本流程。</p>
<h3 id="2-%E5%87%A0%E4%BD%95%E5%8F%98%E6%8D%A2%E4%B8%8E%E8%A7%86%E8%A7%92%E7%B3%BB%E7%BB%9F%E5%AF%B9%E5%BA%94%E8%AF%BE%E7%A8%8B%E7%AC%AC-7-13-%E5%91%A8">2. 几何变换与视角系统（对应课程第 7-13 周）</h3>
<p>为了实现“漫游”功能，项目中需要构建完整的坐标变换矩阵系统。我计划应用课程中讲解的模型变换、视图变换和投影变换矩阵，将体素的世界坐标映射到屏幕空间。同时，通过监听键盘和鼠标输入，动态更新摄像机的欧拉角，从而改变观察矩阵，实现第一人称视角的自由移动。这一部分将是验证几何变换与视角理论的核心环节。</p>
<h3 id="3-%E8%BF%9B%E9%98%B6%E6%B8%B2%E6%9F%93%E4%B8%8E%E6%89%A9%E5%B1%95%E8%AF%BE%E9%A2%98%E5%AF%B9%E5%BA%94%E8%AF%BE%E7%A8%8B%E7%AC%AC-14-17-%E5%91%A8">3. 进阶渲染与扩展课题（对应课程第 14-17 周）</h3>
<p>在完成基础场景搭建后，我计划尝试进阶技术：</p>
<p><strong>纹理映射</strong>：加载外部高清材质包，并将纹理坐标传递给片段着色器，给立方体贴上草地、泥土或石头贴图。</p>
<p><strong>地形生成</strong>：为了模拟自然环境，利用噪声函数，生成自然的起伏地貌。</p>
<p><strong>光照与环境</strong>：探索基础的全局光照模型，实现基于 <strong>Phong 模型</strong> 的昼夜交替光照，结合环境光遮蔽与雾化效果，体现场景的体积感与沉浸感。</p>
<h2 id="%E4%B8%89%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E6%96%BD%E6%96%B9%E6%A1%88">三、系统设计与实施方案</h2>
<h3 id="31-%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84%E8%A7%84%E5%88%92">3.1 总体架构规划</h3>
<p>为了保证代码的可维护性，系统拟采用面向对象的设计思想。主要模块规划如下：</p>
<ul>
<li><strong>窗口管理</strong>：使用 <strong>GLFW</strong> 库处理窗口创建和输入响应，使用 <strong>GLAD</strong> 加载 OpenGL 函数指针，并集成 <strong>ImGui</strong> 用于调试与 UI 展示。</li>
<li><strong>摄像机模块（Camera）</strong>：封装视图矩阵计算逻辑，提供第一人称漫游（Spectator Mode）的接口。</li>
<li><strong>世界管理模块（World）</strong>：考虑到全地图渲染的性能开销，计划采用“分区块”方式组织数据。将世界划分为若干个 16x16x128 的小区块，仅对摄像机附近的区块进行网格构建和渲染。</li>
</ul>
<h3 id="32-%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%E8%B7%AF%E7%BA%BF">3.2 关键技术路线</h3>
<ul>
<li>
<p><strong>数据结构设计</strong>：
在内存中，拟使用一维数组存储每个区块内的方块类型。为了优化渲染性能，将在生成网格时实施<strong>面剔除</strong>策略：仅当方块面与空气或透明物体接触时才生成顶点。此外，引入脏标记机制，确保仅在数据变动时重建网格，避免每帧重复计算。</p>
</li>
<li>
<p><strong>地形生成逻辑</strong>：
为了模拟自然环境，利用噪声函数的连续性特点生成高度图。计划采用多层噪声叠加来模拟平原与山脉的过渡，根据高度分层填充基岩、石头、泥土及表层草地，实现过程式的地形生成。</p>
</li>
<li>
<p><strong>交互逻辑</strong>：
系统拟实现精准的方块破坏与放置功能。这需要涉及射线检测算法。计划采用 DDA（数字微分分析）步进算法，精确计算视线与体素网格的交点，确定玩家指向的方块及其法线方向，从而实现方块的高亮提示与修改。</p>
</li>
</ul>
<h2 id="%E5%9B%9B%E9%A2%84%E6%9C%9F%E6%88%90%E6%9E%9C">四、预期成果</h2>
<p>通过本次大作业，我预期完成一个可运行的 C++ 程序。该程序能够展示一个由体素构成的三维世界，具备以下特征：</p>
<ol>
<li><strong>自由漫游</strong>：用户可以通过键盘和鼠标在无限延伸的场景中自由移动与观察。</li>
<li><strong>动态环境</strong>：场景包含由算法生成的自然地形、昼夜交替的光照变化以及程序化的云层渲染。</li>
<li><strong>交互功能</strong>：支持玩家对方块进行破坏与放置，且伴有视觉反馈。</li>
<li><strong>性能表现</strong>：帧率在常规笔记本电脑上保持流畅（60 FPS+）。</li>
</ol>
<p>这不仅是对本学期计算机图形学知识的一次全面总结，也是对现代 C++ 工程实践能力的一次锻炼。</p>
<h2 id="%E4%BA%94%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%BF%9B%E5%BA%A6%E5%AE%89%E6%8E%92">五、项目开发进度安排</h2>
<p>根据项目当前的开发状态及后续规划，将剩余工作划分为五个阶段进行。</p>
<h3 id="%E7%AC%AC-10-%E5%91%A8%E6%A0%B8%E5%BF%83%E6%B8%B2%E6%9F%93%E6%A1%86%E6%9E%B6%E4%B8%8E%E6%91%84%E5%83%8F%E6%9C%BA%E7%B3%BB%E7%BB%9Fcurrent-phase">第 10 周：核心渲染框架与摄像机系统（Current Phase）</h3>
<p><strong>本周目标</strong>：搭建稳固的 OpenGL 上下文环境，实现三维空间内的自由观察。
<strong>具体实施计划</strong>：</p>
<ol>
<li><strong>基础架构搭建</strong>：使用 CMake 集成 GLFW、GLAD 与 GLM 库。编写 Shader 类，封装 GLSL 编译链接流程，建立 Core Profile 开发环境。</li>
<li><strong>摄像机系统</strong>：基于欧拉角原理实现 FPS 风格摄像机，构建矩阵，实现场景漫游。</li>
</ol>
<h3 id="%E7%AC%AC-11-%E5%91%A8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%8C%BA%E5%9D%97%E7%AE%A1%E7%90%86">第 11 周：数据结构设计与区块管理</h3>
<p><strong>本周目标</strong>：实现体素数据的有效存储与基于区块的网格构建。
<strong>具体实施计划</strong>：</p>
<ol>
<li><strong>区块类设计</strong>：采用一维数组存储 16×128×16 规格体素 ID，利用哈希表管理区块索引与动态加载。</li>
<li><strong>网格构建算法</strong>：实现**面剔除（Face Culling）**算法，仅生成可见面顶点，大幅减少无效三角形。</li>
<li><strong>方块注册表</strong>：集中管理方块属性（透明度、固体属性），为渲染和物理逻辑提供数据支持。</li>
</ol>
<h3 id="%E7%AC%AC-12-%E5%91%A8%E7%BA%B9%E7%90%86%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96%E4%B8%8E%E6%9D%90%E8%B4%A8%E8%A1%A8%E7%8E%B0">第 12 周：纹理系统优化与材质表现</h3>
<p><strong>本周目标</strong>：解决海量方块的纹理映射问题，提升视觉表现力。
<strong>具体实施计划</strong>：</p>
<ol>
<li><strong>纹理图集</strong>：加载外部材质包，动态拼接大纹理图集。</li>
<li><strong>特殊材质渲染</strong>：在 Shader 中实现透明物体（水、玻璃）与不透明物体的分层渲染逻辑。为水面方块增加动画，模拟水面动态。</li>
</ol>
<h3 id="%E7%AC%AC-13-%E5%91%A8%E8%BF%87%E7%A8%8B%E5%BC%8F%E5%9C%B0%E5%BD%A2%E7%94%9F%E6%88%90%E4%B8%8E%E7%8E%AF%E5%A2%83%E7%B3%BB%E7%BB%9F">第 13 周：过程式地形生成与环境系统</h3>
<p><strong>本周目标</strong>：利用算法自动生成自然地形，并构建拟真的环境氛围。
<strong>具体实施计划</strong>：</p>
<ol>
<li><strong>地形生成算法</strong>：引入 <strong>FBM（分形布朗运动）</strong> 与 <strong>Ridge Noise</strong> 叠加算法，生成具有自然起伏感的高度图，并根据高度自动填充生物群系（如雪山、草地）。</li>
<li><strong>动态环境系统</strong>：实现昼夜交替。在 Shader 中动态计算太阳向量，对天空颜色与环境光进行线性插值。</li>
<li><strong>程序化云层</strong>：不使用贴图盒子，而是直接在片段着色器中通过噪声函数计算体积云效果，增强天空的真实感。</li>
</ol>
<h3 id="%E7%AC%AC-15-%E5%91%A8%E4%BA%A4%E4%BA%92%E9%80%BB%E8%BE%91%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%B3%BB%E7%BB%9F%E8%B0%83%E8%AF%95">第 15 周：交互逻辑实现与系统调试</h3>
<p><strong>本周目标</strong>：实现用户与虚拟世界的交互，进行性能优化与演示准备。
<strong>具体实施计划</strong>：</p>
<ol>
<li><strong>光线投射交互</strong>：实现 <strong>DDA（数字微分分析）</strong> 算法，用于精确计算视线与方块的交点。基于此实现方块的<strong>破坏与放置</strong>功能，并添加高亮选中框。</li>
<li><strong>性能优化</strong>：完善 <strong>“脏标记（Dirty Flag）”</strong> 机制与网格重建队列，防止玩家快速移动或大规模破坏方块时造成主线程卡顿。</li>
<li><strong>UI 与调试</strong>：集成 <strong>ImGui</strong> 库，制作调试面板，实时监控 FPS、坐标、切换渲染模式（线框/实体）及调整环境参数。</li>
<li><strong>最终测试</strong>：进行测试，debug，录制演示视频，撰写结课报告。</li>
</ol>

</body>
</html>
